<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE server
    PUBLIC "-//JBoss//DTD MBean Service 4.0//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-service_4_0.dtd">
<server>

	<classpath codebase="." archives="lib/*.jar" />


	<loader-repository>
		jboss.messaging:loader=ScopedLoaderRepository
		<loader-repository-config>java2ParentDelegation=false</loader-repository-config>
	</loader-repository>

	<mbean code="net.link.safeonline.service.RuntimeService" name="safeonline:service=Runtime" />

	<mbean name="safeonline:service=Identity" code="net.link.safeonline.service.IdentityService"
		xmbean-dd="META-INF/identity-xmbean.xml">
		<attribute name="KeyStoreType">jks</attribute>
		<attribute name="KeyStoreResource">
			safe-online-keystore.jks
		</attribute>
		<attribute name="KeyStorePassword">secret</attribute>
	</mbean>

	<mbean name="safeonline:service=AuthIdentity" code="net.link.safeonline.service.AuthIdentityService"
		xmbean-dd="META-INF/auth-identity-xmbean.xml">
		<attribute name="KeyStoreType">jks</attribute>
		<attribute name="KeyStoreResource">
			safe-online-node-keystore.jks
		</attribute>
		<attribute name="KeyStorePassword">secret</attribute>
	</mbean>

	<mbean code="org.jboss.security.auth.login.DynamicLoginConfig"
		name="safeonline:service=DynamicLoginConfig">
		<attribute name="AuthConfig">
			META-INF/safe-online-login-config.xml
		</attribute>
		<depends optional-attribute-name="LoginConfigService">
			jboss.security:service=XMLLoginConfig
		</depends>
		<depends optional-attribute-name="SecurityManagerService">
			jboss.security:service=JaasSecurityManager
		</depends>
	</mbean>

	<mbean code="org.jboss.security.auth.login.DynamicLoginConfig"
		name="safeonline:service=ApplicationDynamicLoginConfig">
		<attribute name="AuthConfig">
			META-INF/safe-online-app-login-config.xml
		</attribute>
		<depends optional-attribute-name="LoginConfigService">
			jboss.security:service=XMLLoginConfig
		</depends>
		<depends optional-attribute-name="SecurityManagerService">
			jboss.security:service=JaasSecurityManager
		</depends>
	</mbean>

	<mbean code="org.jboss.security.auth.login.DynamicLoginConfig"
		name="safeonline:service=DeviceDynamicLoginConfig">
		<attribute name="AuthConfig">
			META-INF/safe-online-device-login-config.xml
		</attribute>
		<depends optional-attribute-name="LoginConfigService">
			jboss.security:service=XMLLoginConfig
		</depends>
		<depends optional-attribute-name="SecurityManagerService">
			jboss.security:service=JaasSecurityManager
		</depends>
	</mbean>

	<mbean code="org.jboss.security.auth.login.DynamicLoginConfig"
		name="safeonline:service=NodeDynamicLoginConfig">
		<attribute name="AuthConfig">
			META-INF/safe-online-node-login-config.xml
		</attribute>
		<depends optional-attribute-name="LoginConfigService">
			jboss.security:service=XMLLoginConfig
		</depends>
		<depends optional-attribute-name="SecurityManagerService">
			jboss.security:service=JaasSecurityManager
		</depends>
	</mbean>

	<mbean code="org.jboss.jms.server.destination.QueueService" name="safeonline:service=Queue,name=outgoing-email"
		xmbean-dd="xmdesc/Queue-xmbean.xml">
		<attribute name="JNDIName">queue/outgoing-email
		</attribute>
		<depends optional-attribute-name="ServerPeer">
			jboss.messaging:service=ServerPeer</depends>
		<depends>jboss.messaging:service=PostOffice
		</depends>
	</mbean>

	<mbean code="org.jboss.jms.server.destination.QueueService" name="safeonline:service=Queue,name=auditBackend"
		xmbean-dd="xmdesc/Queue-xmbean.xml">
		<attribute name="JNDIName">queue/auditBackend
		</attribute>
		<depends optional-attribute-name="ServerPeer">
			jboss.messaging:service=ServerPeer</depends>
		<depends>jboss.messaging:service=PostOffice
		</depends>
	</mbean>

	<mbean code="org.jboss.jms.server.destination.QueueService" name="safeonline:service=Queue,name=notifications"
		xmbean-dd="xmdesc/Queue-xmbean.xml">
		<attribute name="JNDIName">queue/notifications
		</attribute>
		<depends optional-attribute-name="ServerPeer">
			jboss.messaging:service=ServerPeer</depends>
		<depends>jboss.messaging:service=PostOffice
		</depends>
	</mbean>

</server>
