<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich">
	<body>
		<ui:composition template="/WEB-INF/incl/oper-template.xhtml">
			<ui:define name="topnav">
				<ui:include src="/WEB-INF/incl/navigation.xhtml">
					<ui:param name="page" value="applications" />
				</ui:include>
			</ui:define>
			<ui:define name="top_content">
				<h1>#{msgs.operatorEditApplication}:
					#{selectedApplication.name}</h1>
			</ui:define>
			<ui:define name="content">

				<script type="text/javascript"
					src="#{facesContext.externalContext.requestContextPath}/checkboxSelect.js" />

				<h:form enctype="multipart/form-data" id="tabs">

					<rich:simpleTogglePanel switchType="client"
						styleClass="fullwidth" id="generic-tab" label="#{msgs.generic}">
						<table class="inner">
							<colgroup class="half" />
							<colgroup />

							<tbody>
								<tr>
									<th>
										<h:outputText value="#{msgs.name}" />
									</th>
									<td>
										<s:decorate>
											<h:inputText id="name" value="#{operApplication.name}"
												styleClass="label" />
											<h:message for="name" styleClass="error" />
										</s:decorate>
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.friendlyname}" />
									</th>
									<td>
										<s:decorate>
											<h:inputText id="friendlyname" value="#{operApplication.friendlyName}"
												styleClass="label" />
											<h:message for="friendlyname" styleClass="error" />
										</s:decorate>
									</td>
								</tr>
								<tr>

									<th>
										<h:outputText value="#{msgs.applicationOwner}" />
									</th>
									<td>
										<s:decorate>
											<h:selectOneMenu id="owner"
												value="#{operApplication.applicationOwner}" required="true"
												styleClass="label">
												<f:selectItems value="#{availableApplicationOwners}" />
											</h:selectOneMenu>
										</s:decorate>
										<h:message for="owner" styleClass="error" />
									</td>


								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.applicationUrl}" />
									</th>
									<td>
										<s:decorate>
											<h:inputText id="applicationUrl"
												value="#{operApplication.applicationUrl}" styleClass="label" />
											<h:message for="applicationUrl" styleClass="error" />
										</s:decorate>
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.applicationLogo}" />
									</th>
									<td>
										<s:decorate>
											<t:inputFileUpload id="applicationLogo"
												value="#{operApplication.applicationLogoFile}" />
											<h:message for="applicationLogo" styleClass="error" />
										</s:decorate>
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.applicationIdScope}" />
									</th>
									<td>
										<s:decorate>
											<h:selectOneMenu id="applicationIdScope"
												value="#{operApplication.applicationIdScope}" required="true"
												styleClass="label">
												<f:selectItems value="#{applicationIdScopes}" />
											</h:selectOneMenu>
											<h:message for="applicationIdScope" styleClass="error" />
										</s:decorate>
									</td>
								</tr>
								<tr>

									<th>
										<h:outputText value="#{msgs.ssoEnabled}" />
									</th>
									<td>
										<h:selectBooleanCheckbox value="#{operApplication.ssoEnabled}"
											id="ssoEnabled" />
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.ssoLogoutUrl}" />
									</th>
									<td>
										<s:decorate>
											<h:inputText id="ssoLogoutUrl" value="#{operApplication.ssoLogoutUrl}"
												styleClass="label" />
											<h:message for="ssoLogoutUrl" styleClass="error" />
										</s:decorate>
									</td>
								</tr>

							</tbody>
						</table>
					</rich:simpleTogglePanel>

					<rich:simpleTogglePanel switchType="client"
						styleClass="fullwidth" opened="false" id="description-tab" label="#{msgs.description}">
						<h:inputTextarea value="#{operApplication.description}"
							escape="false" cols="60" rows="10" />
					</rich:simpleTogglePanel>

					<rich:simpleTogglePanel switchType="client"
						styleClass="fullwidth" opened="false" id="identity-tab"
						label="#{msgs.applicationIdentity}">
						<rich:dataTable id="identity-table" value="#{identityAttributes}"
							styleClass="inner" var="item">
							<h:column>
								<f:facet name="header">#{msgs.name}</f:facet>
								<h:outputText value="#{item.name}" />
							</h:column>
							<h:column headerClass="small">
								<f:facet name="header">#{msgs.used}</f:facet>
								<h:selectBooleanCheckbox value="#{item.included}"
									id="included" />
							</h:column>
							<h:column headerClass="small">
								<f:facet name="header">#{msgs.required}</f:facet>
								<h:selectBooleanCheckbox value="#{item.required}"
									id="required" onclick="selectBox('included', this)" />
							</h:column>
							<h:column headerClass="small">
								<f:facet name="header">#{msgs.dataMining}</f:facet>
								<h:selectBooleanCheckbox value="#{item.dataMining}"
									id="datamining" onclick="selectBox('included', this)" />
							</h:column>
						</rich:dataTable>
					</rich:simpleTogglePanel>

					<rich:simpleTogglePanel switchType="client"
						styleClass="fullwidth" opened="false" id="restriction-tab"
						label="#{msgs.isDeviceRestriction}">
						<table class="inner">
							<tr>
								<th class="half">
									<h:outputText value="#{msgs.isDeviceRestriction}" />
								</th>
								<td>
									<h:selectBooleanCheckbox id="restriction"
										value="#{operApplication.deviceRestriction}" />
								</td>
							</tr>
						</table>

						<rich:dataTable value="#{operAllowedDevices}" var="item"
							styleClass="inner ">
							<h:column>
								<f:facet name="header">#{msgs.name}</f:facet>
								<h:outputText value="#{item.friendlyName}" />
							</h:column>
							<h:column>
								<f:facet name="header">#{msgs.allowed}</f:facet>
								<h:selectBooleanCheckbox value="#{item.allowed}" />
							</h:column>
							<h:column>
								<f:facet name="header">#{msgs.weight}</f:facet>
								<h:inputText value="#{item.weight}" styleClass="label" />
							</h:column>
						</rich:dataTable>
					</rich:simpleTogglePanel>


					<rich:simpleTogglePanel switchType="client"
						styleClass="fullwidth" opened="false" id="cert-tab" label="#{msgs.accessControl}">
						<table class="inner">
							<colgroup class="half" />
							<colgroup />

							<tbody>
								<tr>
									<th>
										<h:outputText value="#{msgs.accessControlIdmappingService}" />
									</th>
									<td>
										<h:selectBooleanCheckbox id="idmapping"
											value="#{operApplication.idmapping}" />
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.basicHttpBindingOverSSL}" />
									</th>
									<td>
										<h:selectBooleanCheckbox id="skipMessageIntegrityCheck"
											value="#{operApplication.skipMessageIntegrityCheck}" />
									</td>
								</tr>
								<tr>
									<th>
										<h:outputText value="#{msgs.certificate}" />
									</th>
									<td>
										<s:decorate>
											<t:inputFileUpload id="certificate"
												value="#{operApplication.upFile}" styleClass="label" />
										</s:decorate>
									</td>
								</tr>
							</tbody>
						</table>
					</rich:simpleTogglePanel>

					<h:message for="applicationUrl" styleClass="error" />
					<h:message for="certificate" styleClass="error" />
					<h:messages styleClass="error" globalOnly="true" />

					<h:commandButton action="#{operApplication.save}"
						id="save" value="#{msgs.saveaction}" styleClass="submit" />
					<h:commandButton action="cancel" id="cancel"
						value="#{msgs.cancelaction}" immediate="true" styleClass="submit" />
				</h:form>
			</ui:define>

			<ui:define name="sidebar">
				<h:form>
					<ul>
						<li>
							<h:commandLink action="/owners/owners.seam" value="#{msgs.owners}" />
						</li>
						<li>
							<h:commandLink action="/pools/pools.seam" value="#{msgs.applicationPools}" />
						</li>
					</ul>
				</h:form>
			</ui:define>
		</ui:composition>
	</body>

</html>
