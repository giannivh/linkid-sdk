<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE datasources
        PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
        "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
<datasources>
	<local-tx-datasource>
		<jndi-name>${safe-online.data.source}</jndi-name>
		<connection-url>${safe-online.data.source.uri}</connection-url>
        <driver-class>org.hsqldb.jdbcDriver</driver-class>

		<transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
		<user-name>${safe-online.data.source.user}</user-name>
		<password>${safe-online.data.source.pass}</password>
		<min-pool-size>5</min-pool-size>
		<max-pool-size>200</max-pool-size>

		<metadata>
            <type-mapping>Hypersonic SQL</type-mapping>
		</metadata>

        <!-- TEMPORARY FIX! - Disable idle connection removal, HSQLDB has a problem with not reaping threads on closed connections -->
        <idle-timeout-minutes>0</idle-timeout-minutes>
        <!-- Use the security domain defined in conf/login-config.xml -->
        <security-domain>HsqlDbRealm</security-domain>
        <!-- HSQL DB benefits from prepared statement caching -->
        <prepared-statement-cache-size>32</prepared-statement-cache-size>
        <!-- Depend on Hypersonic MBean -->
        <depends>jboss:service=Hypersonic,database=localDB</depends>

	</local-tx-datasource>

    <!-- For hsqldb accessed from jboss only, in-process (standalone) mode --> 
    <mbean code="org.jboss.jdbc.HypersonicDatabase" 
        name="jboss:service=Hypersonic,database=localDB">
        <attribute name="Database">localDB</attribute>
        <attribute name="InProcessMode">true</attribute>
    </mbean>

</datasources>
